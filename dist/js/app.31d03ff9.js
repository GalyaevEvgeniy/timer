(function(t){function e(e){for(var s,r,o=e[0],c=e[1],d=e[2],u=0,m=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&m.push(n[r][0]),n[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);l&&l(e);while(m.length)m.shift()();return i.push.apply(i,d||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],s=!0,o=1;o<a.length;o++){var c=a[o];0!==n[c]&&(s=!1)}s&&(i.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},n={app:0},i=[];function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var d=0;d<o.length;d++)e(o[d]);var l=c;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app"},[a("div",{staticClass:"app__content",class:{"app__content--is-show-modal":t.isShowAddTimerModal}},[a("h1",[t._v("Таймеры")]),a("button",{staticClass:"btn",on:{click:function(e){return e.stopPropagation(),t.onOpenAddTimerModal(e)}}},[t._v(" Add timer ")]),a("div",{staticClass:"timers-container"},[a("transition-group",{attrs:{name:"default",tag:"div"}},t._l(t.timers,(function(t){return a("Timer",{key:t.id,attrs:{dateEnd:new Date(t.dateEnd)}})})),1)],1)]),a("transition",{attrs:{name:"fade"}},[t.isShowAddTimerModal?a("div",{staticClass:"add-timer-modal",on:{click:function(e){e.stopPropagation(),t.isShowAddTimerModal=!1}}},[a("div",{staticClass:"add-timer-modal__container",on:{click:function(t){t.stopPropagation()}}},[a("div",{staticClass:"add-timer-modal__main"},[a("label",{staticClass:"add-timer-modal__item"},[a("div",{staticClass:"add-timer-modal__title"},[t._v("Date")]),a("input",{ref:"addTimerDate",staticClass:"add-timer-modal__input",attrs:{type:"date"}})]),a("label",{staticClass:"add-timer-modal__item"},[a("div",{staticClass:"add-timer-modal__title"},[t._v("Time")]),a("input",{ref:"addTimerTime",staticClass:"add-timer-modal__input",attrs:{type:"time"}})])]),a("div",{staticClass:"add-timer-modal__controls"},[a("button",{staticClass:"btn--cancel",attrs:{type:"button"},on:{click:function(e){e.stopPropagation(),t.isShowAddTimerModal=!1}}},[t._v(" Cancel ")]),a("button",{staticClass:"btn--submit",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),t.onAddTimer(e)}}},[t._v(" Submit ")])])])]):t._e()])],1)},i=[],r=(a("99af"),a("a434"),a("ac1f"),a("1276"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"timer"},[a("div",{staticClass:"timer__date-end"},[a("h3",{staticClass:"timer__date-end__title"},[t._v("Выбранная дата и время")]),a("div",{staticClass:"timer__date-end__value"},[t._v(t._s(t.formattedDateEnd))])]),+t.$store.state.date.now<+t.dateEnd?a("div",{staticClass:"timer__countdown",class:{"timer__countdown--is-soon":+t.$store.state.date.now+3e5>=+t.dateEnd}},[t.days?a("span",{staticClass:"timer__item"},[t._v(t._s(t.days))]):t._e(),t.hours?a("span",{staticClass:"timer__item"},[t._v(t._s(t.hours))]):t._e(),t.minutes?a("span",{staticClass:"timer__item"},[t._v(t._s(t.minutes))]):t._e(),t.seconds?a("span",{staticClass:"timer__item"},[t._v(t._s(t.seconds))]):t._e()]):a("h2",{staticClass:"timer__time-is-up"},[t._v("Таймер истёк")]),a("button",{staticClass:"btn timer__delete",on:{click:function(e){return e.stopPropagation(),t.$root.$emit("delete-timer",+t.dateEnd)}}})])}),o=[],c={props:{dateEnd:{type:Date,require:!0}},computed:{formattedDateEnd:function(){var t=(this.dateEnd.getDate()<10?"0":"")+"".concat(this.dateEnd.getDate());switch(this.dateEnd.getMonth()){case 0:t+=" Января";break;case 1:t+=" Февраля";break;case 2:t+=" Марта";break;case 3:t+=" Апреля";break;case 4:t+=" Мая";break;case 5:t+=" Июня";break;case 6:t+=" Июля";break;case 7:t+=" Авгеста";break;case 8:t+=" Сентября";break;case 9:t+=" Октября";break;case 10:t+=" Ноября";break;case 11:t+=" Декабря";break}return t+=" ".concat(this.dateEnd.getFullYear(),"г. "),t+=(this.dateEnd.getHours()<10?"0":"")+"".concat(this.dateEnd.getHours()),t+=(this.dateEnd.getMinutes()<10?":0":":")+"".concat(this.dateEnd.getMinutes()),t},secondsDifferent:function(){return Math.floor((+this.dateEnd-+this.$store.state.date.now)/1e3)},days:function(){var t="",e=Math.floor(this.secondsDifferent/60/60/24);if(e>0)switch(e){case 1:case 21:case 31:t="".concat(e," день");break;case 2:case 3:case 4:case 22:case 23:case 24:t="".concat(e," дня");break;default:t="".concat(e," дней")}return t},hours:function(){var t="",e=Math.floor(Math.floor(this.secondsDifferent/60/60)%24);if(e>0)switch(e){case 1:case 21:t="".concat(e," час");break;case 2:case 3:case 4:case 22:case 23:t="".concat(e," часа");break;default:t="".concat(e," часов")}return t},minutes:function(){var t="",e=Math.floor(Math.floor(this.secondsDifferent/60)%60);if(e>0)switch(e){case 1:t="".concat(e," минута");break;case 2:case 3:case 4:t="".concat(e," минуты");break;default:t="".concat(e," минут")}return t},seconds:function(){var t="",e=Math.floor(this.secondsDifferent%60);switch(e){case 1:case 21:case 31:case 41:case 51:t="".concat(e," секунда");break;case 2:case 3:case 4:t="".concat(e," секунды");break;default:t="".concat(e," секунд")}return t}}},d=c,l=(a("69ca"),a("2877")),u=Object(l["a"])(d,r,o,!1,null,"59231a10",null),m=u.exports,f={components:{Timer:m},data:function(){return{isShowAddTimerModal:!1,interval:null,timers:null}},methods:{onOpenAddTimerModal:function(){var t=window.localStorage.getItem("timers"),e=t&&JSON.parse(t);t?e&&e.length<3?this.isShowAddTimerModal=!0:alert("Максимум 3 таймера"):this.isShowAddTimerModal=!0},onAddTimer:function(){var t=window.localStorage.getItem("timers"),e=t&&JSON.parse(t);if(this.$refs.addTimerDate.value)if(this.$refs.addTimerTime.value){var a=this.$refs.addTimerDate.value.split("-"),s=this.$refs.addTimerTime.value.split(":"),n=new Date(a[0],a[1]-1,a[2],s[0],s[1]),i=[{id:+n,dateEnd:n}];window.localStorage.setItem("timers",window.localStorage.getItem("timers")?JSON.stringify(e.concat(i)):JSON.stringify(i)),this.setTimersFromStorage(),this.isShowAddTimerModal=!1}else alert("Выберите время");else alert("Выберите дату")},onDeleteTimer:function(t){for(var e=JSON.parse(window.localStorage.getItem("timers")),a=0;a<e.length;a++)e[a].id===t&&(e.splice(a,1),window.localStorage.setItem("timers",JSON.stringify(e)),this.setTimersFromStorage())},setTimersFromStorage:function(){for(var t=[],e=0,a=window.localStorage.getItem("timers")&&JSON.parse(window.localStorage.getItem("timers"));a&&e<a.length;e++)t.unshift(a[e]);this.timers=t.sort((function(t,e){return new Date(t.dateEnd)-new Date(e.dateEnd)}))}},mounted:function(){var t=this;this.setTimersFromStorage(),this.interval=setInterval((function(){t.$store.commit("setNow",new Date),t.$forceUpdate()}),1e3),this.$root.$on("delete-timer",this.onDeleteTimer)},beforeDestroy:function(){clearInterval(this.interval),this.$root.$off("delete-timer",this.onDeleteTimer)}},p=f,h=(a("5c0b"),Object(l["a"])(p,n,i,!1,null,null,null)),_=h.exports,v=a("2f62"),b={now:new Date},w={setNow:function(t,e){t.now=e}},g={state:b,mutations:w};s["a"].use(v["a"]);var S=new v["a"].Store({modules:{date:g}});s["a"].config.productionTip=!1,new s["a"]({store:S,render:function(t){return t(_)}}).$mount("#app")},"5c0b":function(t,e,a){"use strict";var s=a("9c0c"),n=a.n(s);n.a},"69ca":function(t,e,a){"use strict";var s=a("e923"),n=a.n(s);n.a},"9c0c":function(t,e,a){},e923:function(t,e,a){}});
//# sourceMappingURL=app.31d03ff9.js.map